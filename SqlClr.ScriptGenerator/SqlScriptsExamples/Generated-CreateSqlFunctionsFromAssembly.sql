
        sp_configure 'show advanced options', 1
        RECONFIGURE
        GO
        sp_configure 'clr enabled' , 1
        RECONFIGURE
        GO

        -- Delete all functions from assembly 'SqlClr.Regex'
        DECLARE @sql NVARCHAR(MAX)
        SET @sql = 'DROP FUNCTION ' + STUFF(
            (
                SELECT
                    ', ' + assembly_method 
                FROM
                    sys.assembly_modules
                WHERE
                    assembly_id IN (SELECT assembly_id FROM sys.assemblies WHERE name = 'SqlClr.Regex')
                FOR XML PATH('')
            ), 1, 1, '')
        IF @sql IS NOT NULL EXEC sp_executesql @sql
        GO

         -- Delete existing assembly 'SqlClr.Regex' if necessary
        IF EXISTS(SELECT 1 FROM sys.assemblies WHERE name = 'SqlClr.Regex')
            DROP ASSEMBLY SqlClr.Regex;
        GO

        
            -- Create assembly 'SqlClr.Regex' from dll
            CREATE ASSEMBLY [SqlClr.Regex] 
                AUTHORIZATION [dbo]
                FROM 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C010300DD958C540000000000000000E00002210B010B00000C000000060000000000000E2A0000002000000040000000000010002000000002000004000000000000000400000000000000008000000002000000000000030040850000100000100000000010000010000000000000100000000000000000000000C02900004B000000004000002803000000000000000000000000000000000000006000000C000000882800001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000140A000000200000000C000000020000000000000000000000000000200000602E72737263000000280300000040000000040000000E0000000000000000000000000000400000402E72656C6F6300000C0000000060000000020000001200000000000000000000000000004000004200000000000000000000000000000000F02900000000000048000000020005000C2100007C07000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001B3004003B000000010000117E1100000A0A0F00281200000A2D200F00281300000A0F01281300000A0F02281300000A200B020000281400000A0ADE0326DE0006731500000A2A0001100000000006002B310003180000011B3003003E000000020000110F00281200000A2D280F00FE16020000016F1600000A0F01281300000A200B020000281700000A2C087E1800000A0ADE0BDE0326DE007E1900000A2A062A0000011000000000000033330003180000011E02281A00000A2A42534A4201000100000000000C00000076322E302E35303732370000000005006C0000008C020000237E0000F80200006C03000023537472696E6773000000006406000008000000235553006C0600001000000023475549440000007C0600000001000023426C6F620000000000000002000001471502000900000000FA25330016000001000000180000000200000003000000050000001A0000000F00000002000000010000000300000000000A00010000000000060041003A000A00690054000A00890054000600DB00C9000600F200C90006000F01C90006002E01C90006004701C90006006001C90006007B01C90006009601C9000600CE01AF010600E201AF010600F001C90006000902C90006003902260243004D02000006007C025C0206009C025C020A00D502BA020600EA023A000E002B030C030E0031030C03060046033A000000000001000000000001000100010010001B002400050001000100502000000000960073000A000100A8200000000096009400150004000421000000008618A9001E00060000000100AF0000000200B50000000300BD0000000100AF0000000200B5002100A90022002900A90022003100A90022003900A90022004100A90022004900A90022005100A90022005900A90022006100A90027006900A90022007100A90022007900A90022008100A9002C009100A90032009900A9001E00A100A9001E00A900F1023C001100F7023F00110002034300B1003E0347001100A9002200090050034300B10059035400190061035C00190066035C000900A9001E002000830037002E0033007D002E000B0065002E00130077002E001B0077002E00230077002E002B0065002E00530095002E003B0077002E004B0077002E006B00CC002E007B00DE002E006300BF002E007300D50040008300370050006000048000000100000000000000000000000000240000000200000000000000000000000100310000000000020000000000000000000000010048000000000002000000000000000000000001003A00000000000000003C4D6F64756C653E0053716C436C722E52656765782E646C6C0053716C52656765780053716C436C722E5265676578006D73636F726C69620053797374656D004F626A6563740053797374656D2E446174610053797374656D2E446174612E53716C54797065730053716C537472696E67005265706C616365427952656765785061747465726E0053716C426F6F6C65616E00536561726368427952656765785061747465726E002E63746F7200696E707574007061747465726E007265706C616365576974680053797374656D2E5265666C656374696F6E00417373656D626C795469746C6541747472696275746500417373656D626C794465736372697074696F6E41747472696275746500417373656D626C79436F6E66696775726174696F6E41747472696275746500417373656D626C79436F6D70616E7941747472696275746500417373656D626C7950726F6475637441747472696275746500417373656D626C79436F7079726967687441747472696275746500417373656D626C7954726164656D61726B41747472696275746500417373656D626C7943756C747572654174747269627574650053797374656D2E52756E74696D652E496E7465726F70536572766963657300436F6D56697369626C65417474726962757465004775696441747472696275746500417373656D626C7956657273696F6E41747472696275746500417373656D626C7946696C6556657273696F6E4174747269627574650053797374656D2E446961676E6F73746963730044656275676761626C6541747472696275746500446562756767696E674D6F6465730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C697479417474726962757465004D6963726F736F66742E53716C5365727665722E5365727665720053716C46756E6374696F6E41747472696275746500537472696E6700456D707479006765745F49734E756C6C006765745F56616C75650053797374656D2E546578742E526567756C617245787072657373696F6E730052656765780052656765784F7074696F6E73005265706C61636500457863657074696F6E00546F537472696E670049734D6174636800547275650046616C7365000003200000000000AF2641EAF56C774D881FFEF219FE363D0008B77A5C561934E0890A00031109110911091109080002110D1109110903200001042001010E04200101020520010111450420010108040100000002060E032000020320000E0800040E0E0E0E115D0307010E070003020E0E115D0306110D040701110D1101000C53716C436C722E5265676578000005010000000017010012436F7079726967687420C2A920203230313400002901002439353539656633642D323861622D343961382D393362362D66393236333138303731626600000C010007312E302E302E3000000801000200000000000801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F77730100000000000000DD958C5400000000020000001C010000A4280000A40A0000525344531EE769C5AB6CA440ABACC91B543C166601000000633A5C55736572735C436C61756469755C4465736B746F705C5365617263685061747465726E5C5365617263685061747465726E5C53716C436C722E52656765785C6F626A5C52656C656173655C53716C436C722E52656765782E70646200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000E82900000000000000000000FE290000002000000000000000000000000000000000000000000000F02900000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF250020001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058400000D00200000000000000000000D00234000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000001000000000000000100000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B00430020000010053007400720069006E006700460069006C00650049006E0066006F0000000C020000010030003000300030003000340062003000000044000D000100460069006C0065004400650073006300720069007000740069006F006E0000000000530071006C0043006C0072002E005200650067006500780000000000300008000100460069006C006500560065007200730069006F006E000000000031002E0030002E0030002E003000000044001100010049006E007400650072006E0061006C004E0061006D0065000000530071006C0043006C0072002E00520065006700650078002E0064006C006C00000000004800120001004C006500670061006C0043006F007000790072006900670068007400000043006F0070007900720069006700680074002000A90020002000320030003100340000004C00110001004F0072006900670069006E0061006C00460069006C0065006E0061006D0065000000530071006C0043006C0072002E00520065006700650078002E0064006C006C00000000003C000D000100500072006F0064007500630074004E0061006D00650000000000530071006C0043006C0072002E005200650067006500780000000000340008000100500072006F006400750063007400560065007200730069006F006E00000031002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000031002E0030002E0030002E0030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000C000000103A00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
            
        GO

        -- Create all functions from assembly 'SqlClr.Regex'
        CREATE FUNCTION ReplaceByRegexPattern(@input NVARCHAR(MAX), @pattern NVARCHAR(MAX), @replaceWith NVARCHAR(MAX)) RETURNS NVARCHAR(MAX) A SEXTERNAL NAME SqlClr.Regex.[SqlClr.Regex.SqlRegex].ReplaceByRegexPattern;
GO
CREATE FUNCTION SearchByRegexPattern(@input NVARCHAR(MAX), @pattern NVARCHAR(MAX)) RETURNS BIT A SEXTERNAL NAME SqlClr.Regex.[SqlClr.Regex.SqlRegex].SearchByRegexPattern;
GO
